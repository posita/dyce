
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Simple Python tools for dice-based probabilities" name="description"/>
<meta content="Matt Bogosian" name="author"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-7.1.4" name="generator"/>
<title>dyce - dyce</title>
<link href="../assets/stylesheets/main.bde7dde4.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.ef6f36e2.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#dyce-package-reference">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="dyce" class="md-header__button md-logo" data-md-component="logo" href=".." title="dyce">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            dyce
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
<tt>dyce</tt>
</span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/posita/dyce/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="dyce" class="md-nav__button md-logo" data-md-component="logo" href=".." title="dyce">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    dyce
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/posita/dyce/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Introduction
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
        API
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          API
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<tt>dyce</tt>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<tt>dyce</tt>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce">
    dyce
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H">
    H
  </a>
<nav aria-label="H" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.__init__">
    __init__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.concat">
    concat()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.counts">
    counts()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.data">
    data()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.data_xy">
    data_xy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.eq">
    eq()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.even">
    even()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.faces">
    faces()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.filter">
    filter()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.format">
    format()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.ge">
    ge()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.gt">
    gt()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.items">
    items()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.keys">
    keys()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.le">
    le()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.lowest_terms">
    lowest_terms()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.lt">
    lt()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.map">
    map()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.ne">
    ne()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.odd">
    odd()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.roll">
    roll()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.substitute">
    substitute()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.values">
    values()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.H.within">
    within()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D">
    D
  </a>
<nav aria-label="D" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.__init__">
    __init__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.eq">
    eq()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.even">
    even()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.ge">
    ge()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.gt">
    gt()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.h">
    h()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.le">
    le()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.lt">
    lt()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.ne">
    ne()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.odd">
    odd()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.roll">
    roll()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.substitute">
    substitute()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dyce.lib.D.within">
    within()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dyce.plt/">
<tt>dyce.plt</tt>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contrib/">
        Contributing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../license/">
        License
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/posita/dyce/edit/master/docs/dyce.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<!--- -*- encoding: utf-8 -*-
  Copyright and other protections apply. Please see the accompanying LICENSE file for
  rights and restrictions governing use of this software. All rights not expressly
  waived or licensed are reserved. If that file is missing or appears to be modified
  from its original, then please contact the author before viewing or using this
  software in any capacity.

  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
  !!!!!!!!!!!!!!! IMPORTANT: READ THIS BEFORE EDITING! !!!!!!!!!!!!!!!
  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
  Please keep each sentence on its own unwrapped line.
  It looks like crap in a text editor, but it has no effect on rendering, and it allows much more useful diffs.
  Thank you!
-->
<h1 id="dyce-package-reference"><code>dyce</code> package reference</h1>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#dyce" id="dyce" style="visibility: hidden; position: absolute;">
</h2>
<div class="doc doc-contents first">
</div>
</div>
<p><code>dyce</code> provides two key primitives:</p>
<ul>
<li><a href="#dyce.lib.H"><code>H</code></a> for histograms (individual dice or outcomes)</li>
<li><a href="#dyce.lib.D"><code>D</code></a> for collections of histograms (dice sets)</li>
</ul>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="dyce.lib.H">
<code>H</code>
</h2>
<div class="doc doc-contents first">
<p>An immutable mapping for use as a histogram that supports arithmetic operations. The
<a href="#dyce.lib.H.__init__">initializer</a> takes a single parameter, <em>items</em>. In its most
explicit form, <em>items</em> maps faces to counts.</p>
<p>Modeling a single six-sided die (<code>1d6</code>) can be expressed as:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">=</span> <span class="n">H</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>An iterable of pairs can also be used (similar to <code>dict</code>):</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">==</span> <span class="n">H</span><span class="p">(((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>Two shorthands are provided. If <em>items</em> an iterable of <code>int</code>s, counts of one will be
assumed:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">==</span> <span class="n">H</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>Repeated items do what one would expect:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>If <em>items</em> is an <code>int</code>, it is shorthand for creating a sequential range
<span><span class="MathJax_Preview">[{1} .. {items}]</span><script type="math/tex">[{1} .. {items}]</script></span> (or <span><span class="MathJax_Preview">[{items} .. {-1}]</span><script type="math/tex">[{items} .. {-1}]</script></span> if <em>items</em> is negative):</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">==</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>Simple indexes can be used to look up a face’s count:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="mi">1</span>
</code></pre>
</div>
<p>Most arithmetic operators are supported and do what one would expect. If the operand
is an <code>int</code>, the operator applies to the faces:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">+</span> <span class="mi">4</span>
<span class="n">H</span><span class="p">({</span><span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">H</span><span class="p">({</span><span class="o">-</span><span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="o">-</span><span class="n">h6</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="n">H</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>If the operand is another histogram, combinations are computed. Modeling the sum of
two six-sided dice (<code>2d6</code>) can be expressed as:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">+</span> <span class="n">h6</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>    <span class="mf">7.00</span>
  <span class="mi">2</span> <span class="o">|</span>   <span class="mf">2.78</span><span class="o">%</span> <span class="o">|</span><span class="c1">#</span>
  <span class="mi">3</span> <span class="o">|</span>   <span class="mf">5.56</span><span class="o">%</span> <span class="o">|</span><span class="c1">##</span>
  <span class="mi">4</span> <span class="o">|</span>   <span class="mf">8.33</span><span class="o">%</span> <span class="o">|</span><span class="c1">####</span>
  <span class="mi">5</span> <span class="o">|</span>  <span class="mf">11.11</span><span class="o">%</span> <span class="o">|</span><span class="c1">#####</span>
  <span class="mi">6</span> <span class="o">|</span>  <span class="mf">13.89</span><span class="o">%</span> <span class="o">|</span><span class="c1">######</span>
  <span class="mi">7</span> <span class="o">|</span>  <span class="mf">16.67</span><span class="o">%</span> <span class="o">|</span><span class="c1">########</span>
  <span class="mi">8</span> <span class="o">|</span>  <span class="mf">13.89</span><span class="o">%</span> <span class="o">|</span><span class="c1">######</span>
  <span class="mi">9</span> <span class="o">|</span>  <span class="mf">11.11</span><span class="o">%</span> <span class="o">|</span><span class="c1">#####</span>
 <span class="mi">10</span> <span class="o">|</span>   <span class="mf">8.33</span><span class="o">%</span> <span class="o">|</span><span class="c1">####</span>
 <span class="mi">11</span> <span class="o">|</span>   <span class="mf">5.56</span><span class="o">%</span> <span class="o">|</span><span class="c1">##</span>
 <span class="mi">12</span> <span class="o">|</span>   <span class="mf">2.78</span><span class="o">%</span> <span class="o">|</span><span class="c1">#</span>
</code></pre>
</div>
<p>To sum <span><span class="MathJax_Preview">{n}</span><script type="math/tex">{n}</script></span> identical histograms, the matrix multiplication operator (<code>@</code>) provides a
shorthand:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span><span class="nd">@h6</span> <span class="o">==</span> <span class="n">h6</span> <span class="o">+</span> <span class="n">h6</span> <span class="o">+</span> <span class="n">h6</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>The <code>len</code> built-in function can be used to show the number of distinct sums:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="mi">2</span><span class="nd">@h6</span><span class="p">)</span>
<span class="mi">11</span>
</code></pre>
</div>
<p>The <a href="#dyce.lib.H.counts"><code>counts</code> method</a> can be used to show the total number of
combinations:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">sum</span><span class="p">((</span><span class="mi">2</span><span class="nd">@h6</span><span class="p">)</span><span class="o">.</span><span class="n">counts</span><span class="p">())</span>
<span class="mi">36</span>
</code></pre>
</div>
<p>Counts are generally accumulated without reduction:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</code></pre>
</div>
<p>To reduce, call the <a href="#dyce.lib.H.lowest_terms"><code>lowest_terms</code> method</a>:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">_</span><span class="o">.</span><span class="n">lowest_terms</span><span class="p">()</span>
<span class="n">H</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>Testing equivalence implicitly performs reductions of operands:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span> <span class="o">==</span> <span class="n">h6</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>Histograms provide common comparators (e.g., <a href="#dyce.lib.H.eq"><code>eq</code></a>
<a href="#dyce.lib.H.ne"><code>ne</code></a>, etc.). One way to count how often a first six-sided die
shows a different face than a second is:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">30</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>    <span class="mf">0.83</span>
  <span class="mi">0</span> <span class="o">|</span>  <span class="mf">16.67</span><span class="o">%</span> <span class="o">|</span><span class="c1">########</span>
  <span class="mi">1</span> <span class="o">|</span>  <span class="mf">83.33</span><span class="o">%</span> <span class="o">|</span><span class="c1">#########################################</span>
</code></pre>
</div>
<p>Or, how often a first six-sided die shows a face less than a second is:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">lt</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">15</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>    <span class="mf">0.42</span>
  <span class="mi">0</span> <span class="o">|</span>  <span class="mf">58.33</span><span class="o">%</span> <span class="o">|</span><span class="c1">#############################</span>
  <span class="mi">1</span> <span class="o">|</span>  <span class="mf">41.67</span><span class="o">%</span> <span class="o">|</span><span class="c1">####################</span>
</code></pre>
</div>
<p>Or how often at least one <code>2</code> will show when rolling four six-sided dice:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># how often a 2 shows on a single six-sided die</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">4</span><span class="o">@</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>  <span class="c1"># counts of how many 2s show on 4d6</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">625</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># how often the count is at least one</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">625</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">671</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>    <span class="mf">0.52</span>
  <span class="mi">0</span> <span class="o">|</span>  <span class="mf">48.23</span><span class="o">%</span> <span class="o">|</span><span class="c1">########################</span>
  <span class="mi">1</span> <span class="o">|</span>  <span class="mf">51.77</span><span class="o">%</span> <span class="o">|</span><span class="c1">#########################</span>
</code></pre>
</div>
<div class="admonition warning">
<p class="admonition-title">Mind your parentheses</p>
<p>Parentheses are often necessary to enforce the desired order of operations:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="nd">@h6</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>  <span class="c1"># probably not what was intended</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">36</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="nd">@h6</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="o">@</span><span class="p">(</span><span class="n">h6</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">2</span><span class="nd">@h6</span><span class="p">)</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">21</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="nd">@h6</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">2</span><span class="nd">@h6</span><span class="p">)</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="kc">False</span>
</code></pre>
</div>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.__init__">
<code class="highlight language-python">
__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Initializer.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="n">SourceT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="s2">"Initializer."</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_simple_init</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">items</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_simple_init</span> <span class="o">=</span> <span class="n">items</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">items</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">items</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_simple_init</span> <span class="o">=</span> <span class="n">items</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">items</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">H</span><span class="o">.</span><span class="n">AbleT</span><span class="p">):</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="n">h</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># type: DefaultDict[int, int]</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">face</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">item</span>
                <span class="n">h</span><span class="p">[</span><span class="n">face</span><span class="p">]</span> <span class="o">+=</span> <span class="n">count</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">h</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">items</span> <span class="o">=</span> <span class="n">h</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_h</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">((</span><span class="n">face</span><span class="p">,</span> <span class="n">items</span><span class="p">[</span><span class="n">face</span><span class="p">])</span> <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.concat">
<code class="highlight language-python">
concat<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Accumulates counts:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
<span class="n">H</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">concat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">SourceT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Accumulates counts:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H(4).concat(H(6))</span>
<span class="sd">    H({1: 2, 2: 2, 3: 2, 4: 2, 5: 1, 6: 1})</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">other</span> <span class="o">=</span> <span class="p">(</span><span class="n">other</span><span class="p">,)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">H</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">cast</span><span class="p">(</span><span class="n">Iterable</span><span class="p">,</span> <span class="n">other</span><span class="p">)))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.counts">
<code class="highlight language-python">
counts<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>More descriptive synonym for the <a href="#dyce.lib.H.values"><code>values</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">counts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    More descriptive synonym for the [``values`` method][dyce.lib.H.values].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.data">
<code class="highlight language-python">
data<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fill_items</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Presentation helper function that returns an iterator for each face/frequency pair:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">=</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">h6</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">())</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">h6</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)]</span>
</code></pre>
</div>
<p>If provided, <em>fill_items</em> supplies defaults for any missing faces:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">h6</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">())</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">h6</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">fill_items</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">}))</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">relative</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fill_items</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Presentation helper function that returns an iterator for each face/frequency pair:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; h6 = H(6)</span>
<span class="sd">    &gt;&gt;&gt; list(h6.gt(3).data())</span>
<span class="sd">    [(0, 3.0), (1, 3.0)]</span>

<span class="sd">    &gt;&gt;&gt; list(h6.gt(3).data(relative=True))</span>
<span class="sd">    [(0, 0.5), (1, 0.5)]</span>

<span class="sd">    ```</span>

<span class="sd">    If provided, *fill_items* supplies defaults for any missing faces:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; list(h6.gt(7).data())</span>
<span class="sd">    [(0, 6.0)]</span>

<span class="sd">    &gt;&gt;&gt; list(h6.gt(7).data(fill_items={1: 0, 0: 0}))</span>
<span class="sd">    [(0, 6.0), (1, 0.0)]</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">fill_items</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fill_items</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">relative</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">())</span> <span class="ow">or</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">combined</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">fill_items</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

    <span class="k">return</span> <span class="p">((</span><span class="n">face</span><span class="p">,</span> <span class="n">count</span> <span class="o">/</span> <span class="n">total</span><span class="p">)</span> <span class="k">for</span> <span class="n">face</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">combined</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.data_xy">
<code class="highlight language-python">
data_xy<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fill_items</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Presentation helper function that returns an iterator for a “zipped” arrangement of
the output from the <a href="#dyce.lib.H.data"><code>data</code> method</a>:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">=</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">h6</span><span class="o">.</span><span class="n">data</span><span class="p">())</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">data_xy</span><span class="p">()</span>
<span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">data_xy</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">relative</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">fill_items</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">]]:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Presentation helper function that returns an iterator for a “zipped” arrangement of</span>
<span class="sd">    the output from the [``data`` method][dyce.lib.H.data]:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; h6 = H(6)</span>
<span class="sd">    &gt;&gt;&gt; list(h6.data())</span>
<span class="sd">    [(1, 1.0), (2, 1.0), (3, 1.0), (4, 1.0), (5, 1.0), (6, 1.0)]</span>
<span class="sd">    &gt;&gt;&gt; h6.data_xy()</span>
<span class="sd">    ((1, 2, 3, 4, 5, 6), (1.0, 1.0, 1.0, 1.0, 1.0, 1.0))</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span>
        <span class="n">Tuple</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">]],</span>
        <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">relative</span><span class="p">,</span> <span class="n">fill_items</span><span class="p">))),</span>
    <span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.eq">
<code class="highlight language-python">
eq<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.filter(operator.eq, other, t_val, f_val)</code>.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>See the <a href="#dyce.lib.H.filter"><code>filter</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">eq</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.filter(operator.eq, other, t_val, f_val)``.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H(6).eq(3)</span>
<span class="sd">    H({0: 5, 1: 1})</span>

<span class="sd">    ```</span>

<span class="sd">    See the [``filter`` method][dyce.lib.H.filter].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">eq</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.even">
<code class="highlight language-python">
even<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">((</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">even</span><span class="p">()</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">even</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H((-4, -2, 0, 1, 2, 3)).even()</span>
<span class="sd">    H({0: 2, 1: 4})</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_even</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.faces">
<code class="highlight language-python">
faces<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>More descriptive synonym for the <a href="#dyce.lib.H.keys"><code>keys</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">faces</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    More descriptive synonym for the [``keys`` method][dyce.lib.H.keys].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Applies <em>predicate</em> to each face of the histogram paired with <em>other</em>. If the result
is <code>True</code>, <em>t_val</em> is returned, if set. Otherwise the face is returned. If the
result is <code>False</code>, <em>f_val</em> is returned, if set. Otherwise, the other face is
returned.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">=</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">3</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</code></pre>
</div>
<p>Note that shorthands exist for many comparison operators:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="n">h6</span><span class="p">)</span> <span class="o">==</span> <span class="n">h6</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="n">h6</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="n">h6</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">h6</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">le</span><span class="p">,</span> <span class="n">h6</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">predicate</span><span class="p">:</span> <span class="n">_BinaryPredicateT</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Applies *predicate* to each face of the histogram paired with *other*. If the result</span>
<span class="sd">    is ``True``, *t_val* is returned, if set. Otherwise the face is returned. If the</span>
<span class="sd">    result is ``False``, *f_val* is returned, if set. Otherwise, the other face is</span>
<span class="sd">    returned.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; h6 = H(6)</span>
<span class="sd">    &gt;&gt;&gt; h6.filter(operator.gt, 3)</span>
<span class="sd">    H({3: 3, 4: 1, 5: 1, 6: 1})</span>

<span class="sd">    &gt;&gt;&gt; h6.filter(operator.gt, 3, f_val=0)</span>
<span class="sd">    H({0: 3, 4: 1, 5: 1, 6: 1})</span>

<span class="sd">    &gt;&gt;&gt; h6.filter(operator.gt, 3, t_val=1, f_val=0)</span>
<span class="sd">    H({0: 3, 1: 3})</span>

<span class="sd">    ```</span>

<span class="sd">    Note that shorthands exist for many comparison operators:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; h6.gt(h6) == h6.filter(operator.gt, h6, t_val=1, f_val=0)</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; h6.le(h6, t_val=1, f_val=-1) == h6.filter(operator.le, h6, t_val=1, f_val=-1)</span>
<span class="sd">    True</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">_resolve</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">predicate</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">a</span> <span class="k">if</span> <span class="n">t_val</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">t_val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">b</span> <span class="k">if</span> <span class="n">f_val</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">f_val</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">_resolve</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.format">
<code class="highlight language-python">
format<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fill_items</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">88</span><span class="p">,</span> <span class="n">tick</span><span class="o">=</span><span class="s1">'#'</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Returns a formatted string representation of the histogram. If provided,
<em>fill_items</em> supplies defaults for any missing faces. If <em>width</em> is greater
than zero, a horizontal bar ASCII graph is printed using <em>tick</em> and <em>sep</em> (which
are otherwise ignored if <em>width</em> is zero or less).</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="p">{</span><span class="n">avg</span><span class="p">:</span> <span class="mf">3.50</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">16.67</span><span class="o">%</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">16.67</span><span class="o">%</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">16.67</span><span class="o">%</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mf">16.67</span><span class="o">%</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mf">16.67</span><span class="o">%</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mf">16.67</span><span class="o">%</span><span class="p">}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">((</span><span class="mi">2</span><span class="nd">@H</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fill_items</span><span class="o">=</span><span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">)},</span> <span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">,</span> <span class="n">tick</span><span class="o">=</span><span class="s2">"@"</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>    <span class="mf">7.00</span>
  <span class="mi">1</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
  <span class="mi">2</span> <span class="o">|</span>   <span class="mf">2.78</span><span class="o">%</span> <span class="o">|@</span>
  <span class="mi">3</span> <span class="o">|</span>   <span class="mf">5.56</span><span class="o">%</span> <span class="o">|@@</span>
  <span class="mi">4</span> <span class="o">|</span>   <span class="mf">8.33</span><span class="o">%</span> <span class="o">|@@@@</span>
  <span class="mi">5</span> <span class="o">|</span>  <span class="mf">11.11</span><span class="o">%</span> <span class="o">|@@@@@</span>
  <span class="mi">6</span> <span class="o">|</span>  <span class="mf">13.89</span><span class="o">%</span> <span class="o">|@@@@@@</span>
  <span class="mi">7</span> <span class="o">|</span>  <span class="mf">16.67</span><span class="o">%</span> <span class="o">|@@@@@@@@</span>
  <span class="mi">8</span> <span class="o">|</span>  <span class="mf">13.89</span><span class="o">%</span> <span class="o">|@@@@@@</span>
  <span class="mi">9</span> <span class="o">|</span>  <span class="mf">11.11</span><span class="o">%</span> <span class="o">|@@@@@</span>
 <span class="mi">10</span> <span class="o">|</span>   <span class="mf">8.33</span><span class="o">%</span> <span class="o">|@@@@</span>
 <span class="mi">11</span> <span class="o">|</span>   <span class="mf">5.56</span><span class="o">%</span> <span class="o">|@@</span>
 <span class="mi">12</span> <span class="o">|</span>   <span class="mf">2.78</span><span class="o">%</span> <span class="o">|@</span>
 <span class="mi">13</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">14</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">15</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">16</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">17</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">18</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">19</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">20</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">format</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">fill_items</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_ROW_WIDTH</span><span class="p">,</span>
    <span class="n">tick</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"#"</span><span class="p">,</span>
    <span class="n">sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Returns a formatted string representation of the histogram. If provided,</span>
<span class="sd">    *fill_items* supplies defaults for any missing faces. If *width* is greater</span>
<span class="sd">    than zero, a horizontal bar ASCII graph is printed using *tick* and *sep* (which</span>
<span class="sd">    are otherwise ignored if *width* is zero or less).</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; print(H(6).format(width=0))</span>
<span class="sd">    {avg: 3.50, 1: 16.67%, 2: 16.67%, 3: 16.67%, 4: 16.67%, 5: 16.67%, 6: 16.67%}</span>

<span class="sd">    &gt;&gt;&gt; print((2@H(6)).format(fill_items={i: 0 for i in range(1, 21)}, width=65, tick="@"))</span>
<span class="sd">    avg |    7.00</span>
<span class="sd">      1 |   0.00% |</span>
<span class="sd">      2 |   2.78% |@</span>
<span class="sd">      3 |   5.56% |@@</span>
<span class="sd">      4 |   8.33% |@@@@</span>
<span class="sd">      5 |  11.11% |@@@@@</span>
<span class="sd">      6 |  13.89% |@@@@@@</span>
<span class="sd">      7 |  16.67% |@@@@@@@@</span>
<span class="sd">      8 |  13.89% |@@@@@@</span>
<span class="sd">      9 |  11.11% |@@@@@</span>
<span class="sd">     10 |   8.33% |@@@@</span>
<span class="sd">     11 |   5.56% |@@</span>
<span class="sd">     12 |   2.78% |@</span>
<span class="sd">     13 |   0.00% |</span>
<span class="sd">     14 |   0.00% |</span>
<span class="sd">     15 |   0.00% |</span>
<span class="sd">     16 |   0.00% |</span>
<span class="sd">     17 |   0.00% |</span>
<span class="sd">     18 |   0.00% |</span>
<span class="sd">     19 |   0.00% |</span>
<span class="sd">     20 |   0.00% |</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">width</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">parts</span><span class="p">():</span>
            <span class="k">yield</span> <span class="s2">"avg: </span><span class="si">{:.2f}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">avg</span><span class="p">())</span>

            <span class="k">for</span> <span class="n">face</span><span class="p">,</span> <span class="n">percentage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill_items</span><span class="o">=</span><span class="n">fill_items</span><span class="p">):</span>
                <span class="k">yield</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">:</span><span class="si">{:7.2%}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">face</span><span class="p">,</span> <span class="n">percentage</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">"{"</span> <span class="o">+</span> <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">())</span> <span class="o">+</span> <span class="s2">"}"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">width</span> <span class="o">-</span> <span class="mi">15</span>

        <span class="k">def</span> <span class="nf">lines</span><span class="p">():</span>
            <span class="k">yield</span> <span class="s2">"avg | </span><span class="si">{:7.2f}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">avg</span><span class="p">())</span>

            <span class="k">for</span> <span class="n">face</span><span class="p">,</span> <span class="n">percentage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill_items</span><span class="o">=</span><span class="n">fill_items</span><span class="p">):</span>
                <span class="n">ticks</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">w</span> <span class="o">*</span> <span class="n">percentage</span><span class="p">)</span>
                <span class="k">yield</span> <span class="s2">"</span><span class="si">{: 3}</span><span class="s2"> | </span><span class="si">{:7.2%}</span><span class="s2"> |</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">face</span><span class="p">,</span> <span class="n">percentage</span><span class="p">,</span> <span class="n">tick</span> <span class="o">*</span> <span class="n">ticks</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">())</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.ge">
<code class="highlight language-python">
ge<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.filter(operator.ge, other, t_val, f_val)</code>.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</code></pre>
</div>
<p>See the <a href="#dyce.lib.H.filter"><code>filter</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ge</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.filter(operator.ge, other, t_val, f_val)``.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H(6).ge(3)</span>
<span class="sd">    H({0: 2, 1: 4})</span>

<span class="sd">    ```</span>

<span class="sd">    See the [``filter`` method][dyce.lib.H.filter].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">ge</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.gt">
<code class="highlight language-python">
gt<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.filter(operator.gt, other, t_val, f_val)</code>.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</code></pre>
</div>
<p>See the <a href="#dyce.lib.H.filter"><code>filter</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">gt</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.filter(operator.gt, other, t_val, f_val)``.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H(6).gt(3)</span>
<span class="sd">    H({0: 3, 1: 3})</span>

<span class="sd">    ```</span>

<span class="sd">    See the [``filter`` method][dyce.lib.H.filter].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.items">
<code class="highlight language-python">
items<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>D.items() -&gt; a set-like object providing a view on D's items</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.keys">
<code class="highlight language-python">
keys<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>D.keys() -&gt; a set-like object providing a view on D's keys</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.le">
<code class="highlight language-python">
le<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.filter(operator.le, other, t_val, f_val)</code>.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
</code></pre>
</div>
<p>See the <a href="#dyce.lib.H.filter"><code>filter</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">le</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.filter(operator.le, other, t_val, f_val)``.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H(6).le(3)</span>
<span class="sd">    H({0: 3, 1: 3})</span>

<span class="sd">    ```</span>

<span class="sd">    See the [``filter`` method][dyce.lib.H.filter].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">le</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.lowest_terms">
<code class="highlight language-python">
lowest_terms<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Computes and returns a histogram whose counts share a greatest common divisor of 1.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">H</span><span class="p">({</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_</span><span class="o">.</span><span class="n">lowest_terms</span><span class="p">()</span>
<span class="n">H</span><span class="p">({</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_</span><span class="o">.</span><span class="n">lowest_terms</span><span class="p">()</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">lowest_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Computes and returns a histogram whose counts share a greatest common divisor of 1.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H((-1, -1, 0, 0, 1, 1))</span>
<span class="sd">    H({-1: 2, 0: 2, 1: 2})</span>
<span class="sd">    &gt;&gt;&gt; _.lowest_terms()</span>
<span class="sd">    H({-1: 1, 0: 1, 1: 1})</span>

<span class="sd">    &gt;&gt;&gt; H((2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5))</span>
<span class="sd">    H({2: 2, 3: 4, 4: 4, 5: 2})</span>
<span class="sd">    &gt;&gt;&gt; _.lowest_terms()</span>
<span class="sd">    H({2: 1, 3: 2, 4: 2, 5: 1})</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="n">counts_gcd</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">gcd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">H</span><span class="p">({</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="o">//</span> <span class="n">counts_gcd</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.lt">
<code class="highlight language-python">
lt<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.filter(operator.lt, other, t_val, f_val)</code>:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">lt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</code></pre>
</div>
<p>See the <a href="#dyce.lib.H.filter"><code>filter</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">lt</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.filter(operator.lt, other, t_val, f_val)``:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H(6).lt(3)</span>
<span class="sd">    H({0: 4, 1: 2})</span>

<span class="sd">    ```</span>

<span class="sd">    See the [``filter`` method][dyce.lib.H.filter].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">lt</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.map">
<code class="highlight language-python">
map<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oper</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Applies <em>oper</em> to each face of the histogram paired with <em>other</em>:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">=</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">h6</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="o">-</span><span class="mi">6</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>Note that shorthands exist for many arithmetic operators:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="n">h6</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">h6</span> <span class="o">+</span> <span class="n">h6</span> <span class="o">==</span> <span class="n">h6</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">h6</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oper</span><span class="p">:</span> <span class="n">_BinaryOperatorT</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Applies *oper* to each face of the histogram paired with *other*:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; h6 = H(6)</span>
<span class="sd">    &gt;&gt;&gt; h6.map(operator.add, h6)</span>
<span class="sd">    H({2: 1, 3: 2, 4: 3, 5: 4, 6: 5, 7: 6, 8: 5, 9: 4, 10: 3, 11: 2, 12: 1})</span>

<span class="sd">    &gt;&gt;&gt; h6.map(operator.mul, -1)</span>
<span class="sd">    H({-6: 1, -5: 1, -4: 1, -3: 1, -2: 1, -1: 1})</span>

<span class="sd">    ```</span>

<span class="sd">    Note that shorthands exist for many arithmetic operators:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; h6 * -1 == h6.map(operator.mul, -1)</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; h6 + h6 == h6.map(operator.add, h6)</span>
<span class="sd">    True</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">H</span><span class="o">.</span><span class="n">AbleT</span><span class="p">):</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">h</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">H</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">oper</span><span class="p">(</span><span class="n">face</span><span class="p">,</span> <span class="n">other</span><span class="p">)),</span> <span class="n">count</span><span class="p">)</span> <span class="k">for</span> <span class="n">face</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">H</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">H</span><span class="p">(</span>
            <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">oper</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)),</span> <span class="bp">self</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">*</span> <span class="n">other</span><span class="p">[</span><span class="n">b</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.ne">
<code class="highlight language-python">
ne<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.filter(operator.ne, other, t_val, f_val)</code>.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
</code></pre>
</div>
<p>See the <a href="#dyce.lib.H.filter"><code>filter</code> method</a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ne</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.filter(operator.ne, other, t_val, f_val)``.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H(6).ne(3)</span>
<span class="sd">    H({0: 1, 1: 5})</span>

<span class="sd">    ```</span>

<span class="sd">    See the [``filter`` method][dyce.lib.H.filter].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">ne</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.odd">
<code class="highlight language-python">
odd<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">((</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">odd</span><span class="p">()</span>
<span class="n">H</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">odd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; H((-4, -2, 0, 1, 2, 3)).odd()</span>
<span class="sd">    H({0: 4, 1: 2})</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">is_odd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_odd</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.roll">
<code class="highlight language-python">
roll<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Returns a (weighted) random face.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">roll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Returns a (weighted) random face.</span>
<span class="sd">    """</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">()))</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">face</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">count</span>

        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">face</span>

    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">"val (</span><span class="si">{}</span><span class="s2">) ≥ total (</span><span class="si">{}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.substitute">
<code class="highlight language-python">
substitute<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expand</span><span class="p">,</span> <span class="n">coalesce</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Calls <em>expand</em> on each face, recursively up to <em>max_depth</em> times. If <em>expand</em>
returns non-<code>None</code>, <em>coalesce</em> is called on the face and the expanded histogram,
and the returned histogram is folded into result. The default behavior for
<em>coalesce</em> is to replace the face with the expanded histogram.</p>
<p>This can be used to model complex rules. The following models re-rolling a face
of 1 on the first roll:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">reroll_one</span><span class="p">(</span><span class="n">h</span><span class="p">:</span> <span class="n">H</span><span class="p">,</span> <span class="n">face</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">H</span><span class="p">]:</span>
<span class="o">...</span>   <span class="k">return</span> <span class="n">h</span> <span class="k">if</span> <span class="n">face</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">reroll_one</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>
</code></pre>
</div>
<p>The following approximates an exploding three-sided die (i.e., if the greatest
face comes up, the die is rolled again and its face is added to the total):</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">reroll_greatest</span><span class="p">(</span><span class="n">h</span><span class="p">:</span> <span class="n">H</span><span class="p">,</span> <span class="n">face</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">H</span><span class="p">]:</span>
<span class="o">...</span>   <span class="k">return</span> <span class="n">h</span> <span class="k">if</span> <span class="n">face</span> <span class="o">==</span> <span class="nb">max</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">reroll_greatest</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>Consider the following rules:</p>
<ol>
<li>Start with a total of zero.</li>
<li>Roll a six-sided die. Add the face to the total. If the face was a six, go
     to step 3. Otherwise stop.</li>
<li>Roll a four-sided die. Add the face to the total. If the face was a four,
     go to step 2. Otherwise stop.</li>
</ol>
<p>What is the likelihood of an even final tally? This can be approximated by:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">h4</span><span class="p">,</span> <span class="n">h6</span> <span class="o">=</span> <span class="n">H</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">reroll_greatest_on_h4_h6</span><span class="p">(</span><span class="n">h</span><span class="p">:</span> <span class="n">H</span><span class="p">,</span> <span class="n">face</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">H</span><span class="p">]:</span>
<span class="o">...</span>   <span class="k">if</span> <span class="n">face</span> <span class="o">==</span> <span class="nb">max</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">if</span> <span class="n">h</span> <span class="o">==</span> <span class="n">h6</span><span class="p">:</span> <span class="k">return</span> <span class="n">h4</span>
<span class="o">...</span>     <span class="k">if</span> <span class="n">h</span> <span class="o">==</span> <span class="n">h4</span><span class="p">:</span> <span class="k">return</span> <span class="n">h6</span>
<span class="o">...</span>   <span class="k">return</span> <span class="kc">None</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">h</span> <span class="o">=</span> <span class="n">h6</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">reroll_greatest_on_h4_h6</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">h_even</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">even</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="si">{:.3%}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h_even</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">h_even</span><span class="o">.</span><span class="n">counts</span><span class="p">())))</span>
<span class="mf">39.131</span><span class="o">%</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">substitute</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">expand</span><span class="p">:</span> <span class="n">_ExpandT</span><span class="p">,</span>
    <span class="n">coalesce</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">_CoalesceT</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Calls *expand* on each face, recursively up to *max_depth* times. If *expand*</span>
<span class="sd">    returns non-``None``, *coalesce* is called on the face and the expanded histogram,</span>
<span class="sd">    and the returned histogram is folded into result. The default behavior for</span>
<span class="sd">    *coalesce* is to replace the face with the expanded histogram.</span>

<span class="sd">    This can be used to model complex rules. The following models re-rolling a face</span>
<span class="sd">    of 1 on the first roll:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; def reroll_one(h: H, face: int) -&gt; Optional[H]:</span>
<span class="sd">    ...   return h if face == 1 else None</span>
<span class="sd">    &gt;&gt;&gt; H(6).substitute(reroll_one)</span>
<span class="sd">    H({1: 1, 2: 7, 3: 7, 4: 7, 5: 7, 6: 7})</span>

<span class="sd">    ```</span>

<span class="sd">    The following approximates an exploding three-sided die (i.e., if the greatest</span>
<span class="sd">    face comes up, the die is rolled again and its face is added to the total):</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; def reroll_greatest(h: H, face: int) -&gt; Optional[H]:</span>
<span class="sd">    ...   return h if face == max(h) else None</span>
<span class="sd">    &gt;&gt;&gt; H(3).substitute(reroll_greatest, operator.add, max_depth=4)</span>
<span class="sd">    H({1: 81, 2: 81, 4: 27, 5: 27, 7: 9, 8: 9, 10: 3, 11: 3, 13: 1, 14: 1, 15: 1})</span>

<span class="sd">    ```</span>

<span class="sd">    Consider the following rules:</span>

<span class="sd">      1. Start with a total of zero.</span>
<span class="sd">      2. Roll a six-sided die. Add the face to the total. If the face was a six, go</span>
<span class="sd">         to step 3. Otherwise stop.</span>
<span class="sd">      3. Roll a four-sided die. Add the face to the total. If the face was a four,</span>
<span class="sd">         go to step 2. Otherwise stop.</span>

<span class="sd">    What is the likelihood of an even final tally? This can be approximated by:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; h4, h6 = H(4), H(6)</span>
<span class="sd">    &gt;&gt;&gt; def reroll_greatest_on_h4_h6(h: H, face: int) -&gt; Optional[H]:</span>
<span class="sd">    ...   if face == max(h):</span>
<span class="sd">    ...     if h == h6: return h4</span>
<span class="sd">    ...     if h == h4: return h6</span>
<span class="sd">    ...   return None</span>
<span class="sd">    &gt;&gt;&gt; h = h6.substitute(reroll_greatest_on_h4_h6, operator.add, max_depth=6)</span>
<span class="sd">    &gt;&gt;&gt; h_even = h.even()</span>
<span class="sd">    &gt;&gt;&gt; print("{:.3%}".format(h_even.get(1, 0) / sum(h_even.counts())))</span>
<span class="sd">    39.131%</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">coalesce</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">coalesce</span> <span class="o">=</span> <span class="n">_coalesce_replace</span>

    <span class="k">def</span> <span class="nf">_substitute</span><span class="p">(</span>
        <span class="n">h</span><span class="p">:</span> <span class="n">H</span><span class="p">,</span>
        <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">H</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">coalesce</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">depth</span> <span class="o">==</span> <span class="n">max_depth</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">h</span>

        <span class="n">expanded_items</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: List[Tuple[int, int]]</span>
        <span class="n">expanded_histograms</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: List[H]</span>

        <span class="k">for</span> <span class="n">face</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">h</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">expanded</span> <span class="o">=</span> <span class="n">expand</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">face</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">expanded</span><span class="p">:</span>
                <span class="n">expanded</span> <span class="o">=</span> <span class="n">_substitute</span><span class="p">(</span><span class="n">expanded</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">expanded</span> <span class="o">=</span> <span class="n">H</span><span class="p">((</span><span class="n">f</span><span class="p">,</span> <span class="n">count</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">expanded</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
                <span class="n">expanded</span> <span class="o">=</span> <span class="n">coalesce</span><span class="p">(</span><span class="n">expanded</span><span class="p">,</span> <span class="n">face</span><span class="p">)</span>
                <span class="n">expanded_histograms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">expanded</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">expanded_items</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">face</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>

        <span class="n">count_multiplier</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">sum</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">ah</span><span class="o">.</span><span class="n">counts</span><span class="p">()</span> <span class="k">for</span> <span class="n">ah</span> <span class="ow">in</span> <span class="n">expanded_histograms</span><span class="p">)))</span> <span class="ow">or</span> <span class="mi">1</span>
        <span class="p">)</span>

        <span class="n">expanded_counts</span> <span class="o">=</span> <span class="p">((</span><span class="n">f</span><span class="p">,</span> <span class="n">count_multiplier</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">expanded_items</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">H</span><span class="p">(</span>
            <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
                <span class="n">expanded_counts</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">ah</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">for</span> <span class="n">ah</span> <span class="ow">in</span> <span class="n">expanded_histograms</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">_substitute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.values">
<code class="highlight language-python">
values<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>D.values() -&gt; an object providing a view on D's values</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.H.within">
<code class="highlight language-python">
within<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Computes the difference between this histogram and <em>other</em>. -1 is represents where
that difference is less than <em>lo</em>. 0 represents where that difference between
<em>lo</em> and <em>hi</em> (inclusive). 1 represents where that difference is greater than
<em>hi</em>.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">2</span><span class="nd">@H</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">H</span><span class="p">({</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">6</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>   <span class="o">-</span><span class="mf">0.25</span>
 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>  <span class="mf">41.67</span><span class="o">%</span> <span class="o">|</span><span class="c1">####################</span>
  <span class="mi">0</span> <span class="o">|</span>  <span class="mf">41.67</span><span class="o">%</span> <span class="o">|</span><span class="c1">####################</span>
  <span class="mi">1</span> <span class="o">|</span>  <span class="mf">16.67</span><span class="o">%</span> <span class="o">|</span><span class="c1">########</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">3</span><span class="nd">@H</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="nd">@H</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>  <span class="c1"># 3d6 w/in 1 of 2d8</span>
<span class="n">H</span><span class="p">({</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">3500</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="mi">3412</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">6912</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>    <span class="mf">0.25</span>
 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>  <span class="mf">25.32</span><span class="o">%</span> <span class="o">|</span><span class="c1">############</span>
  <span class="mi">0</span> <span class="o">|</span>  <span class="mf">24.68</span><span class="o">%</span> <span class="o">|</span><span class="c1">############</span>
  <span class="mi">1</span> <span class="o">|</span>  <span class="mf">50.00</span><span class="o">%</span> <span class="o">|</span><span class="c1">#########################</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">within</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Computes the difference between this histogram and *other*. -1 is represents where</span>
<span class="sd">    that difference is less than *lo*. 0 represents where that difference between</span>
<span class="sd">    *lo* and *hi* (inclusive). 1 represents where that difference is greater than</span>
<span class="sd">    *hi*.</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; (2@H(6)).within(7, 9)</span>
<span class="sd">    H({-1: 15, 0: 15, 1: 6})</span>
<span class="sd">    &gt;&gt;&gt; print(_.format(width=65))</span>
<span class="sd">    avg |   -0.25</span>
<span class="sd">     -1 |  41.67% |####################</span>
<span class="sd">      0 |  41.67% |####################</span>
<span class="sd">      1 |  16.67% |########</span>

<span class="sd">    &gt;&gt;&gt; (3@H(6)).within(-1, 1, 2@H(8))  # 3d6 w/in 1 of 2d8</span>
<span class="sd">    H({-1: 3500, 0: 3412, 1: 6912})</span>
<span class="sd">    &gt;&gt;&gt; print(_.format(width=65))</span>
<span class="sd">    avg |    0.25</span>
<span class="sd">     -1 |  25.32% |############</span>
<span class="sd">      0 |  24.68% |############</span>
<span class="sd">      1 |  50.00% |#########################</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">_within</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">),</span> <span class="n">other</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="dyce.lib.D">
<code>D</code>
</h2>
<div class="doc doc-contents first">
<p>An immutable container of convenience for a vector of zero or more
<a href="#dyce.lib.H"><code>H</code></a> objects supporting group operations. The vector can be flattened
to a single histogram, either explicitly via the <a href="#dyce.lib.D.h"><code>h</code> method</a>, or by
using binary arithmetic operations. Unary operators and the <code>@</code> operator result in
new <code>D</code> objects. If any of the <a href="#dyce.lib.D.__init__">initializer</a>’s <em>args</em>
parameter is an <code>int</code>, it is passed to the constructor for <code>H</code>.</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">d6</span> <span class="o">=</span> <span class="n">D</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># shorthand for D(H(6))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d6</span>
<span class="n">D</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">-</span><span class="n">d6</span>
<span class="n">D</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">D</span><span class="p">(</span><span class="n">d6</span><span class="p">,</span> <span class="n">d6</span><span class="p">)</span>  <span class="c1"># 2d6</span>
<span class="n">D</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="nd">@d6</span>  <span class="c1"># also 2d6</span>
<span class="n">D</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="o">@</span><span class="p">(</span><span class="mi">2</span><span class="nd">@d6</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="nd">@d6</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">D</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">D</span><span class="p">(</span><span class="mi">20</span><span class="p">))))))</span>
<span class="n">D</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">roll</span><span class="p">())</span> <span class="ow">in</span> <span class="n">_</span><span class="o">.</span><span class="n">h</span><span class="p">()</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>Arithmetic operators involving an <code>int</code> or another <code>D</code> object produces an
<a href="#dyce.lib.H"><code>H</code> object</a>:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">d6</span> <span class="o">+</span> <span class="n">d6</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">D</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">H</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>Comparisons between <code>D</code> and <a href="#dyce.lib.H"><code>H</code></a> objects still work:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span><span class="nd">@d6</span> <span class="o">==</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="n">H</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>For <code>D</code> objects containing more than one <a href="#dyce.lib.H"><code>H</code> object</a>, slicing grabs
a subset of faces from least to greatest. Modeling the sum of the greatest two faces
of three six-sided dice (<code>3d6</code>) can be expressed as:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">3</span><span class="nd">@d6</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">16</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>    <span class="mf">8.46</span>
  <span class="mi">2</span> <span class="o">|</span>   <span class="mf">0.46</span><span class="o">%</span> <span class="o">|</span>
  <span class="mi">3</span> <span class="o">|</span>   <span class="mf">1.39</span><span class="o">%</span> <span class="o">|</span>
  <span class="mi">4</span> <span class="o">|</span>   <span class="mf">3.24</span><span class="o">%</span> <span class="o">|</span><span class="c1">#</span>
  <span class="mi">5</span> <span class="o">|</span>   <span class="mf">5.56</span><span class="o">%</span> <span class="o">|</span><span class="c1">##</span>
  <span class="mi">6</span> <span class="o">|</span>   <span class="mf">8.80</span><span class="o">%</span> <span class="o">|</span><span class="c1">####</span>
  <span class="mi">7</span> <span class="o">|</span>  <span class="mf">12.50</span><span class="o">%</span> <span class="o">|</span><span class="c1">######</span>
  <span class="mi">8</span> <span class="o">|</span>  <span class="mf">15.74</span><span class="o">%</span> <span class="o">|</span><span class="c1">#######</span>
  <span class="mi">9</span> <span class="o">|</span>  <span class="mf">16.67</span><span class="o">%</span> <span class="o">|</span><span class="c1">########</span>
 <span class="mi">10</span> <span class="o">|</span>  <span class="mf">15.74</span><span class="o">%</span> <span class="o">|</span><span class="c1">#######</span>
 <span class="mi">11</span> <span class="o">|</span>  <span class="mf">12.50</span><span class="o">%</span> <span class="o">|</span><span class="c1">######</span>
 <span class="mi">12</span> <span class="o">|</span>   <span class="mf">7.41</span><span class="o">%</span> <span class="o">|</span><span class="c1">###</span>
</code></pre>
</div>
<p>Arbitrary iterables can be used for more flexible selections:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">6</span><span class="nd">@D</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">every_other_d6</span> <span class="o">=</span> <span class="n">d</span><span class="p">[::</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">every_other_d6</span>
<span class="n">H</span><span class="p">({</span><span class="mi">3</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">86</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">1106</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">395</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">31</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">every_other_d6</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span> <span class="o">==</span> <span class="n">every_other_d6</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">==</span> <span class="n">every_other_d6</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">}]</span> <span class="o">==</span> <span class="n">every_other_d6</span>
<span class="kc">True</span>
</code></pre>
</div>
<p>Modeling the sum of the greatest two and least two faces of ten four-sided dice
(<code>10d4</code>) can be expressed as:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">10</span><span class="nd">@D</span><span class="p">(</span><span class="mi">4</span><span class="p">))[:</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
<span class="n">H</span><span class="p">({</span><span class="mi">4</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">1012</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">5030</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">51973</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">168760</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">595004</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">168760</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">51973</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">5030</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">1012</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">65</span><span class="p">))</span>
<span class="n">avg</span> <span class="o">|</span>   <span class="mf">10.00</span>
  <span class="mi">4</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
  <span class="mi">5</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
  <span class="mi">6</span> <span class="o">|</span>   <span class="mf">0.10</span><span class="o">%</span> <span class="o">|</span>
  <span class="mi">7</span> <span class="o">|</span>   <span class="mf">0.48</span><span class="o">%</span> <span class="o">|</span>
  <span class="mi">8</span> <span class="o">|</span>   <span class="mf">4.96</span><span class="o">%</span> <span class="o">|</span><span class="c1">##</span>
  <span class="mi">9</span> <span class="o">|</span>  <span class="mf">16.09</span><span class="o">%</span> <span class="o">|</span><span class="c1">########</span>
 <span class="mi">10</span> <span class="o">|</span>  <span class="mf">56.74</span><span class="o">%</span> <span class="o">|</span><span class="c1">############################</span>
 <span class="mi">11</span> <span class="o">|</span>  <span class="mf">16.09</span><span class="o">%</span> <span class="o">|</span><span class="c1">########</span>
 <span class="mi">12</span> <span class="o">|</span>   <span class="mf">4.96</span><span class="o">%</span> <span class="o">|</span><span class="c1">##</span>
 <span class="mi">13</span> <span class="o">|</span>   <span class="mf">0.48</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">14</span> <span class="o">|</span>   <span class="mf">0.10</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">15</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
 <span class="mi">16</span> <span class="o">|</span>   <span class="mf">0.00</span><span class="o">%</span> <span class="o">|</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.__init__">
<code class="highlight language-python">
__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h3>
<div class="doc doc-contents">
<p>Initializer.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="s2">"D"</span><span class="p">,</span> <span class="s2">"H"</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sa">r</span><span class="s2">"Initializer."</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_gen_hs</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">H</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">H</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">a</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">D</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">_hs</span><span class="p">:</span>  <span class="c1"># pylint: disable=protected-access</span>
                    <span class="k">yield</span> <span class="n">h</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">"type </span><span class="si">{}</span><span class="s2"> incompatible initializer for </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>

    <span class="n">hs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">h</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">_gen_hs</span><span class="p">()</span> <span class="k">if</span> <span class="n">h</span><span class="p">)</span>
    <span class="n">hs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">hs</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.eq">
<code class="highlight language-python">
eq<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().eq(other, t_val, f_val)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.eq"><code>H.eq</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">eq</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().eq(other, t_val, f_val)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.eq``][dyce.lib.H.eq].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.even">
<code class="highlight language-python">
even<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().even(t_val, f_val)</code>. See the <a href="#dyce.lib.D.h"><code>h</code> method</a>
and <a href="#dyce.lib.H.even"><code>H.even</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">even</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().even(t_val, f_val)``. See the [``h`` method][dyce.lib.D.h]</span>
<span class="sd">    and [``H.even``][dyce.lib.H.even].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">even</span><span class="p">(</span><span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.ge">
<code class="highlight language-python">
ge<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().ge(other, t_val, f_val)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.ge"><code>H.ge</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ge</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().ge(other, t_val, f_val)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.ge``][dyce.lib.H.ge].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.gt">
<code class="highlight language-python">
gt<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().gt(other, t_val, f_val)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.gt"><code>H.gt</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">gt</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().gt(other, t_val, f_val)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.gt``][dyce.lib.H.gt].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.h">
<code class="highlight language-python">
h<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Combines contained histograms:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">2</span><span class="nd">@D</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">.</span><span class="n">h</span><span class="p">()</span>
<span class="n">H</span><span class="p">({</span><span class="mi">2</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</code></pre>
</div>
<p>If the optional <em>index</em> parameter is provided, extract the contained histogram
at that index:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">D</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">H</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</code></pre>
</div>
<p>Note that containers are opinionated about histogram ordering:</p>
<div class="highlight">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">D</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">D</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">H</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Combines contained histograms:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; (2@D(6)).h()</span>
<span class="sd">    H({2: 1, 3: 2, 4: 3, 5: 4, 6: 5, 7: 6, 8: 5, 9: 4, 10: 3, 11: 2, 12: 1})</span>

<span class="sd">    ```</span>

<span class="sd">    If the optional *index* parameter is provided, extract the contained histogram</span>
<span class="sd">    at that index:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; D(4, 6, 8).h(0)</span>
<span class="sd">    H(4)</span>

<span class="sd">    ```</span>

<span class="sd">    Note that containers are opinionated about histogram ordering:</span>

<span class="sd">    ```python</span>
<span class="sd">    &gt;&gt;&gt; D(8, 6, 4).h(0) == D(8, 4, 6).h(0) == H(4)</span>
<span class="sd">    True</span>

<span class="sd">    ```</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs</span><span class="p">:</span>
        <span class="n">hs_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">hs_sum</span> <span class="o">=</span> <span class="n">H</span><span class="p">(())</span>

    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">hs_sum</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.le">
<code class="highlight language-python">
le<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().le(other, t_val, f_val)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.le"><code>H.le</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">le</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().le(other, t_val, f_val)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.le``][dyce.lib.H.le].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">le</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.lt">
<code class="highlight language-python">
lt<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().lt(other, t_val, f_val)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.lt"><code>H.lt</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">lt</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().lt(other, t_val, f_val)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.lt``][dyce.lib.H.lt].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">lt</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.ne">
<code class="highlight language-python">
ne<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().ne(other, t_val, f_val)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.ne"><code>H.ne</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ne</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span><span class="p">,</span>
    <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().ne(other, t_val, f_val)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.ne``][dyce.lib.H.ne].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.odd">
<code class="highlight language-python">
odd<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().odd(t_val, f_val)</code>. See the <a href="#dyce.lib.D.h"><code>h</code> method</a>
and <a href="#dyce.lib.H.odd"><code>H.odd</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">odd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">f_val</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().odd(t_val, f_val)``. See the [``h`` method][dyce.lib.D.h]</span>
<span class="sd">    and [``H.odd``][dyce.lib.H.odd].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">odd</span><span class="p">(</span><span class="n">t_val</span><span class="p">,</span> <span class="n">f_val</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.roll">
<code class="highlight language-python">
roll<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Returns (weighted) random faces from contained histograms.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">roll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Returns (weighted) random faces from contained histograms.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">roll</span><span class="p">()</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hs</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.substitute">
<code class="highlight language-python">
substitute<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expand</span><span class="p">,</span> <span class="n">coalesce</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().substitute(expand, coalesce, max_depth)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.substitute"><code>H.substitute</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">substitute</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">expand</span><span class="p">:</span> <span class="n">_ExpandT</span><span class="p">,</span>
    <span class="n">coalesce</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">_CoalesceT</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">H</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().substitute(expand, coalesce, max_depth)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.substitute``][dyce.lib.H.substitute].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">expand</span><span class="p">,</span> <span class="n">coalesce</span><span class="p">,</span> <span class="n">max_depth</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="dyce.lib.D.within">
<code class="highlight language-python">
within<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Shorthand for <code>self.h().within(lo, hi, other)</code>. See the
<a href="#dyce.lib.D.h"><code>h</code> method</a> and <a href="#dyce.lib.H.within"><code>H.within</code></a>.</p>
<details class="quote">
<summary>Source code in <code>dyce/lib.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">within</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">OperandT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"H"</span><span class="p">:</span>
    <span class="sa">r</span><span class="sd">"""</span>
<span class="sd">    Shorthand for ``self.h().within(lo, hi, other)``. See the</span>
<span class="sd">    [``h`` method][dyce.lib.D.h] and [``H.within``][dyce.lib.H.within].</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">()</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a class="md-footer__link md-footer__link--prev" href=".." rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
</div>
</a>
<a class="md-footer__link md-footer__link--next" href="../dyce.plt/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
<tt>dyce.plt</tt>
</div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
<i>Copyright and other protections apply. Please see the accompanying <tt>LICENSE</tt> file for rights and restrictions governing use of this software. All rights not expressly waived or licensed are reserved. If that file is missing or appears to be modified from its original, then please contact the author before viewing or using this software in any capacity.</i>
</div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": {"provider": "mike"}}</script>
<script src="../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
<script src="../mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>